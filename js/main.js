"use strict";function dispatchEvent(a,b,c){socket&&!b.parentElement.dataset.userId&&socket.send(JSON.stringify({type:a,item:$(".icon",b).getAttribute("src"),offset:c}))}function handlePrimary(a){var c,d,b=Math.min,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,f=a.currentTarget;if(!f.classList.contains("disabled")){dispatchEvent("user_primary",f,e);var g=$(".nobody",f),h=+(null!==(c=f.dataset.total)&&void 0!==c?c:1)+!!g,i=h+1,j=+(null!==(d=f.dataset.level)&&void 0!==d?d:0);(0===j||$(".icon",f).classList.contains("opaque"))&&(j=(j+(i+e)%i)%i),f.dataset.level=j,g&&j===h&&g.classList.add("opaque");var k=b(j,h-!!g),l=f.dataset.group,m=l?$$("[data-group=\"".concat(l,"\"]"),f.parentElement):[f];m.forEach(function(a){a.dataset.level=j;var b=f===a?$(".icon",a):null,c=$(".number",a),d=$(".nobody",a);switch(1<k&&(null===c||void 0===c?void 0:c.setAttribute("src","img/numbers/".concat(k,".png"))),j){case 0:null===b||void 0===b?void 0:b.classList.remove("opaque"),null===c||void 0===c?void 0:c.classList.remove("opaque"),null===d||void 0===d?void 0:d.classList.remove("opaque");break;case 1:null===b||void 0===b?void 0:b.classList.add("opaque"),null===c||void 0===c?void 0:c.classList.remove("opaque");break;default:null===b||void 0===b?void 0:b.classList.add("opaque"),null===c||void 0===c?void 0:c.classList.add("opaque");}})}}function handleSecondary(a){var b,c=a.currentTarget;if(!c.classList.contains("disabled")){var d=$(".secondary",c);if(d){dispatchEvent("user_secondary",c);var e=d.dataset.files;if(!e)return d.classList.toggle("opaque");e=JSON.parse(d.dataset.files);var f=+(null!==(b=d.dataset.index)&&void 0!==b?b:0)+1;0==f%(e.length+1)?f=0:d.setAttribute("src","img/".concat(e[f-1],".png")),2>f&&d.classList.toggle("opaque"),d.dataset.index=f}}}function handleDisable(a){var b=a.currentTarget;dispatchEvent("user_disable",b),b.classList.toggle("disabled")}$$(".grid > div").forEach(function(a){a.onmousedown=function(a){switch(a.button){case 0:handlePrimary(a);break;case 2:handleSecondary(a);break;case 1:handleDisable(a);}},a.oncontextmenu=function(a){return a.preventDefault()},a.onwheel=function(a){if(scrollElem.checked){a.preventDefault();var b=0>a.deltaY?1:-1;handlePrimary(a,b)}}}),document.body.onmousedown=function(a){if(1===a.button)return!1};

//# sourceMappingURL=main.js.map